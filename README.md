# Система обработки заказов ресторана.
Система представляет из себя два отдельных микросервиса на основе RESTful API для системы обработки заказов в ресторане, первый из которых реализует авторизацию пользователей с различными ролями, а второй – управляет заказами и отслеживает запас блюд.
Также в состав программного обеспечения вход узел (Gateway), который позволяет объединить микросервисы и обращаться к ним извне как к одному серверу.

## Стек технологий.
Приложение разработано на базе фреймворка Spring с применением базы данных H2.
Помимо этого для написания тестов применялся фреймоворк JUnit и Mockito.
Взаимодействие с клиентами производится с помощью протокола HTTP 1.1 и формата JSON.

## Документация к API.
Документация организована с помощью Swagger и размещена по пути http://localhost:8080/swagger-ui.html (адрес и порт могут быть иными в зависимости от установленных настроек).

## Архитектура.
### Структура проекта.
- gateway - узел для объединения микросервисов и их связи между собой;
- framework - общие компоненты для всех модулей программного продукта;
- - framework/auth - общие компоненты, связанные с авторизацией (JWT-ключи и т.д.);
- - framework/core - общие компоненты, необходимые для базовой настройки микросервиса;
- services - проекты микросервисов
- - services/auth - микросервис авторизации. Отвечает за регистрацию, авторизацию пользователей и выдачу информации о его текущей сессии;
- - services/rent - микросервис заказов и меню. Отвечает за создание и обработку заказов, за управлением меню и блюдами.

### Взаимодействие с микросервисами.
При отправке запроса пользователем на сервер изначально он обрабатывается узлом (Gateway), который уже производит переадресацию на нужный микросервис в зависимости от содержания запроса.
Микросервис принимает переадресованный запрос и выполняет соответствующую логику, результат работы которой возвращается в Gateway, а тот уже в свою очередь производит его выдачу пользователю.

### Строение микросервиса и принцип его работы.
Микросервис состоит из контроллера, самого компонента логики сервиса (Service) и иных компонентов для реализации соответствующего функционала (Repository и т.д).
Запрос от пользователя принимается соответствующим контроллером (Controller), который уже производит маппинг DTO в объекты бизнес-логики и выполняет соответствующие методы в логике.

### Система сборки.
Все микросервисы и компоненты программного продукта разделены на отдельные модули, собираются с помощью системы сборки Gradle и объединены в его единый проект.

## Сборка проекта.
Для сборки проекта необходима установленная на компьютер версия OpenJDK не менее 19.
Сборка производится путем выполнения следующих команд в корневой папке проекта:
```
>> ./gradlew :gateway:bootJar
>> ./gradlew :services_auth:bootJar
>> ./gradlew :services_rent:bootJar
```

Полученные jar-файлы для микросервисов и узла будут размещены по следующим путям:
- Узел (Gateway): gateway/build/libs
- Микросервис авторизации: services/auth/build/libs
- Микросервис заказов и меню: services/rent/build/libs

## Настройки по-умолчанию.
Компоненты программного продукта для организации внешнего доступа к ним используют следующие порты:
- Узел (Gateway): 8080
- Микросервис авторизации: 8081
- Микросервис заказов и меню: 8082